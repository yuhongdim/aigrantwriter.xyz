<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grant Proposal AI - Professional Grant Writing Assistant</title>
    <meta name="description" content="Generate winning grant proposals with AI assistance. Professional grant writing tool for researchers and institutions.">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .tool-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 100px;
        }
        .tool-form {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #6366f1;
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .generate-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
            width: 100%;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
        }
        .output-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }
        .output-content {
            line-height: 1.8;
            color: #333;
        }
        .loading {
            text-align: center;
            padding: 2rem;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #6366f1;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            text-decoration: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-left"></i> è¿”å›é¦–é¡µ
    </a>

    <div class="tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-money-bill-wave"></i> Grant Proposal AI</h1>
            <p>Generate professional grant proposals with AI assistance</p>
        </div>

        <div class="tool-form">
            <form id="grantForm">
                <div class="form-group">
                    <label for="projectTitle">Project Title</label>
                    <input type="text" id="projectTitle" name="projectTitle" placeholder="Enter your project title" required>
                </div>

                <div class="form-group">
                    <label for="fundingAgency">Funding Agency</label>
                    <select id="fundingAgency" name="fundingAgency" required>
                        <option value="">Select funding agency</option>
                        <option value="nsf">National Science Foundation (NSF)</option>
                        <option value="nih">National Institutes of Health (NIH)</option>
                        <option value="doe">Department of Energy (DOE)</option>
                        <option value="nasa">NASA</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="researchArea">Research Area</label>
                    <input type="text" id="researchArea" name="researchArea" placeholder="e.g., Artificial Intelligence, Climate Science" required>
                </div>

                <div class="form-group">
                    <label for="projectDescription">Project Description</label>
                    <textarea id="projectDescription" name="projectDescription" placeholder="Provide a brief description of your research project, objectives, and methodology" required></textarea>
                </div>

                <div class="form-group">
                    <label for="budgetRange">Budget Range</label>
                    <select id="budgetRange" name="budgetRange" required>
                        <option value="">Select budget range</option>
                        <option value="small">$1,000 - $10,000</option>
                        <option value="medium">$10,000 - $50,000</option>
                        <option value="large">$50,000 - $200,000</option>
                        <option value="xlarge">$200,000+</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="duration">Project Duration</label>
                    <select id="duration" name="duration" required>
                        <option value="">Select duration</option>
                        <option value="6months">6 months</option>
                        <option value="1year">1 year</option>
                        <option value="2years">2 years</option>
                        <option value="3years">3 years</option>
                        <option value="5years">5 years</option>
                    </select>
                </div>

                <button type="submit" class="generate-btn">
                    <i class="fas fa-magic"></i> Generate Grant Proposal
                </button>
            </form>
        </div>

        <div id="outputSection" class="output-section">
            <h3><i class="fas fa-file-alt"></i> Generated Grant Proposal</h3>
            <div id="outputContent" class="output-content"></div>
            <button onclick="downloadProposal()" class="generate-btn" style="margin-top: 1rem;">
                <i class="fas fa-download"></i> Download Proposal
            </button>
        </div>
    </div>

    <script>
        document.getElementById('grantForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Show loading
            const outputSection = document.getElementById('outputSection');
            const outputContent = document.getElementById('outputContent');
            
            outputSection.style.display = 'block';
            outputContent.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>AI is generating your grant proposal...</p>
                </div>
            `;
            
            try {
                // Generate AI proposal
                const proposal = await generateAIProposal(data);
                outputContent.innerHTML = proposal;
            } catch (error) {
                console.error('AI generation failed:', error);
                
                // æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
                showNotification(`AIç”Ÿæˆå¤±è´¥: ${error.message}`, 'error');
                
                // ä½¿ç”¨å¤‡ç”¨ç”Ÿæˆå™¨
                console.log('Using fallback generator...');
                const fallbackProposal = generateProposal(data);
                outputContent.innerHTML = `
                    <div class="notice" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin-bottom: 20px; border-radius: 8px;">
                        <p><strong>æ³¨æ„ï¼š</strong>AIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œå·²ä¸ºæ‚¨ç”ŸæˆåŸºç¡€ææ¡ˆæ¨¡æ¿ã€‚æ‚¨å¯ä»¥åŸºäºæ­¤æ¨¡æ¿è¿›è¡Œä¿®æ”¹å’Œå®Œå–„ã€‚</p>
                        <p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong>${error.message}</p>
                    </div>
                    ${formatProposalContent(fallbackProposal, data)}
                `;
                
                showNotification('å·²ä½¿ç”¨å¤‡ç”¨ç”Ÿæˆå™¨åˆ›å»ºææ¡ˆæ¨¡æ¿', 'info');
            }
        });

        // é€šçŸ¥ç³»ç»Ÿ
        function showNotification(message, type = 'info') {
            // ç§»é™¤ç°æœ‰é€šçŸ¥
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // åˆ›å»ºæ–°é€šçŸ¥
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: inherit; font-size: 18px; cursor: pointer; margin-left: 10px;">&times;</button>
            `;

            // æ·»åŠ æ ·å¼
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                max-width: 400px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                display: flex;
                align-items: center;
                justify-content: space-between;
            `;

            // æ ¹æ®ç±»å‹è®¾ç½®é¢œè‰²
            if (type === 'error') {
                notification.style.backgroundColor = '#e74c3c';
            } else if (type === 'success') {
                notification.style.backgroundColor = '#27ae60';
            } else {
                notification.style.backgroundColor = '#3498db';
            }

            document.body.appendChild(notification);

            // 5ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        const API_CONFIGS = [
            {
                name: 'Primary API',
                baseURL: 'https://api.openai.com/v1/chat/completions',
                apiKey: 'your-openai-api-key-here',
                model: 'gpt-3.5-turbo'
            },
            {
                name: 'Backup API 1',
                baseURL: 'https://api.anthropic.com/v1/messages',
                apiKey: 'your-anthropic-api-key-here',
                model: 'claude-3-haiku-20240307'
            },
            {
                name: 'Backup API 2',
                baseURL: 'https://breakout.wenwen-ai.com/v1/chat/completions',
                apiKey: 'sk-6ogS4COJPVLfLclruLQ6h59IxyvcN61nGuvgpr71VNL3ARsN',
                model: 'gpt-3.5-turbo'
            }
        ];

        // å½“å‰ä½¿ç”¨çš„APIé…ç½®ç´¢å¼•
        let currentAPIIndex = 0;

        async function generateAIProposal(data) {
            const prompt = `Generate a comprehensive grant proposal for the following project:

Project Title: ${data.projectTitle}
Funding Agency: ${data.fundingAgency}
Research Area: ${data.researchArea}
Project Description: ${data.projectDescription}
Budget Range: ${getBudgetText(data.budgetRange)}
Duration: ${data.duration}

Please create a detailed, professional grant proposal that includes:
1. Executive Summary
2. Project Description and Significance
3. Literature Review and Background
4. Research Objectives and Hypotheses
5. Methodology and Approach
6. Timeline and Milestones
7. Budget Justification
8. Expected Outcomes and Impact
9. Evaluation and Dissemination Plan
10. Conclusion

Make it compelling, well-structured, and tailored to the specific funding agency requirements. Use professional academic language and ensure all sections are comprehensive and detailed.`;

            // å°è¯•æ‰€æœ‰å¯ç”¨çš„APIé…ç½®
            for (let i = 0; i < API_CONFIGS.length; i++) {
                const config = API_CONFIGS[i];
                
                // è·³è¿‡æ²¡æœ‰æœ‰æ•ˆAPIå¯†é’¥çš„é…ç½®
                if (config.apiKey.includes('your-') || config.apiKey.includes('here')) {
                    console.log(`Skipping ${config.name}: No valid API key`);
                    continue;
                }
                
                try {
                    console.log(`Trying ${config.name}...`);
                    
                    const response = await fetch(config.baseURL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${config.apiKey}`,
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            model: config.model,
                            messages: [
                                {
                                    role: 'system',
                                    content: 'You are a professional grant writing expert with extensive experience in securing research funding. Generate comprehensive, compelling grant proposals that meet funding agency requirements.'
                                },
                                {
                                    role: 'user',
                                    content: prompt
                                }
                            ],
                            max_tokens: 4000,
                            temperature: 0.7
                        }),
                        signal: AbortSignal.timeout(30000) // 30ç§’è¶…æ—¶
                    });

                    console.log(`${config.name} Response Status:`, response.status);

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error(`${config.name} Error Response:`, errorText);
                        
                        // å¦‚æœæ˜¯503é”™è¯¯ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªAPI
                        if (response.status === 503) {
                            console.log(`${config.name} is unavailable (503), trying next API...`);
                            continue;
                        }
                        
                        throw new Error(`${config.name} request failed: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    console.log(`${config.name} Success:`, result);
                    
                    if (result.choices && result.choices[0] && result.choices[0].message) {
                        showNotification(`æˆåŠŸä½¿ç”¨ ${config.name} ç”Ÿæˆææ¡ˆ`, 'success');
                        return formatProposalContent(result.choices[0].message.content, data);
                    } else {
                        console.error(`${config.name} Invalid response structure:`, result);
                        continue;
                    }
                } catch (error) {
                    console.error(`${config.name} Error:`, error);
                    
                    // å¦‚æœæ˜¯ç½‘ç»œé”™è¯¯æˆ–è¶…æ—¶ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªAPI
                    if (error.name === 'AbortError' || error.message.includes('fetch')) {
                        console.log(`${config.name} network error, trying next API...`);
                        continue;
                    }
                }
            }
            
            // æ‰€æœ‰APIéƒ½å¤±è´¥äº†
            throw new Error('æ‰€æœ‰AIæœåŠ¡éƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•æˆ–ä½¿ç”¨æœ¬åœ°ç”Ÿæˆå™¨');
        }

        function formatProposalContent(content, data) {
            return `
                <div class="proposal-header">
                    <h3>${data.projectTitle}</h3>
                    <p><strong>Funding Agency:</strong> ${data.fundingAgency}</p>
                    <p><strong>Research Area:</strong> ${data.researchArea}</p>
                    <p><strong>Requested Amount:</strong> ${getBudgetText(data.budgetRange)}</p>
                    <p><strong>Duration:</strong> ${data.duration}</p>
                </div>
                <div class="proposal-content">
                    ${content.replace(/\n/g, '<br>')}
                </div>
                <div class="proposal-footer">
                    <p><em>This proposal was generated using AI assistance. Please review and customize according to your specific requirements and funding agency guidelines.</em></p>
                </div>
            `;
        }

        function generateProposal(data) {
            const currentDate = new Date().toLocaleDateString('zh-CN');
            const projectDuration = data.duration || '12ä¸ªæœˆ';
            const budgetText = getBudgetText(data.budgetRange);
            
            return `
                <div class="proposal-section">
                    <h4>ğŸ“‹ Executive Summary</h4>
                    <div class="section-content">
                        <p><strong>Project Title:</strong> ${data.projectTitle}</p>
                        <p><strong>Principal Investigator:</strong> [è¯·å¡«å†™æ‚¨çš„å§“å]</p>
                        <p><strong>Institution:</strong> [è¯·å¡«å†™æ‚¨çš„æœºæ„åç§°]</p>
                        <p><strong>Funding Agency:</strong> ${data.fundingAgency}</p>
                        <p><strong>Requested Amount:</strong> ${budgetText}</p>
                        <p><strong>Project Duration:</strong> ${projectDuration}</p>
                        <p><strong>Submission Date:</strong> ${currentDate}</p>
                        
                        <p><strong>Project Overview:</strong></p>
                        <p>${data.projectDescription || 'æœ¬é¡¹ç›®æ—¨åœ¨é€šè¿‡åˆ›æ–°çš„ç ”ç©¶æ–¹æ³•å’Œå…ˆè¿›çš„æŠ€æœ¯æ‰‹æ®µï¼Œè§£å†³' + data.researchArea + 'é¢†åŸŸçš„å…³é”®é—®é¢˜ï¼Œä¸ºå­¦æœ¯ç•Œå’Œç¤¾ä¼šå¸¦æ¥é‡è¦è´¡çŒ®ã€‚'}</p>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ¯ Project Description and Significance</h4>
                    <div class="section-content">
                        <p><strong>Research Background:</strong></p>
                        <p>${data.projectDescription}</p>
                        
                        <p><strong>Research Significance:</strong></p>
                        <ul>
                            <li>å¡«è¡¥${data.researchArea}é¢†åŸŸçš„é‡è¦çŸ¥è¯†ç©ºç™½</li>
                            <li>ä¸ºç›¸å…³ç†è®ºå‘å±•æä¾›å®è¯æ”¯æŒ</li>
                            <li>å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼å’Œå®é™…åº”ç”¨å‰æ™¯</li>
                            <li>æ¨åŠ¨${data.researchArea}é¢†åŸŸçš„åˆ›æ–°å‘å±•</li>
                        </ul>
                        
                        <p><strong>Innovation Points:</strong></p>
                        <ul>
                            <li>é‡‡ç”¨åˆ›æ–°çš„ç ”ç©¶æ–¹æ³•å’ŒæŠ€æœ¯è·¯çº¿</li>
                            <li>è·¨å­¦ç§‘çš„ç ”ç©¶è§†è§’å’Œæ–¹æ³•</li>
                            <li>å…·æœ‰å‰ç»æ€§çš„ç ”ç©¶æ€è·¯</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ“š Literature Review and Background</h4>
                    <div class="section-content">
                        <p><strong>Current State of Research:</strong></p>
                        <p>åœ¨${data.researchArea}é¢†åŸŸï¼Œç°æœ‰ç ”ç©¶ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
                        <ul>
                            <li>ç†è®ºåŸºç¡€ç ”ç©¶ï¼šç›¸å…³ç†è®ºæ¡†æ¶çš„å»ºç«‹å’Œå®Œå–„</li>
                            <li>æ–¹æ³•å­¦ç ”ç©¶ï¼šç ”ç©¶æ–¹æ³•å’ŒæŠ€æœ¯æ‰‹æ®µçš„åˆ›æ–°</li>
                            <li>å®è¯ç ”ç©¶ï¼šå…·ä½“é—®é¢˜çš„å®è¯åˆ†æå’ŒéªŒè¯</li>
                            <li>åº”ç”¨ç ”ç©¶ï¼šç†è®ºæˆæœçš„å®é™…åº”ç”¨å’Œè½¬åŒ–</li>
                        </ul>
                        
                        <p><strong>Research Gaps:</strong></p>
                        <p>å°½ç®¡å·²æœ‰ç ”ç©¶å–å¾—äº†é‡è¦è¿›å±•ï¼Œä½†ä»å­˜åœ¨ä»¥ä¸‹ä¸è¶³ï¼š</p>
                        <ul>
                            <li>ç†è®ºä½“ç³»æœ‰å¾…è¿›ä¸€æ­¥å®Œå–„</li>
                            <li>ç ”ç©¶æ–¹æ³•éœ€è¦åˆ›æ–°å’Œæ”¹è¿›</li>
                            <li>å®è¯ç ”ç©¶çš„æ·±åº¦å’Œå¹¿åº¦æœ‰é™</li>
                            <li>ç†è®ºä¸å®è·µçš„ç»“åˆéœ€è¦åŠ å¼º</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ¯ Research Objectives and Hypotheses</h4>
                    <div class="section-content">
                        <p><strong>Primary Objectives:</strong></p>
                        <ol>
                            <li>æ·±å…¥ç ”ç©¶${data.researchArea}é¢†åŸŸçš„æ ¸å¿ƒé—®é¢˜</li>
                            <li>å»ºç«‹å®Œå–„çš„ç†è®ºæ¡†æ¶å’Œåˆ†ææ¨¡å‹</li>
                            <li>å¼€å‘åˆ›æ–°çš„ç ”ç©¶æ–¹æ³•å’ŒæŠ€æœ¯æ‰‹æ®µ</li>
                            <li>éªŒè¯ç ”ç©¶å‡è®¾å¹¶å¾—å‡ºç§‘å­¦ç»“è®º</li>
                        </ol>
                        
                        <p><strong>Research Hypotheses:</strong></p>
                        <ul>
                            <li>å‡è®¾1ï¼šé€šè¿‡æœ¬ç ”ç©¶çš„æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆè§£å†³ç›¸å…³é—®é¢˜</li>
                            <li>å‡è®¾2ï¼šç ”ç©¶ç»“æœå°†å¯¹ç†è®ºå‘å±•äº§ç”Ÿé‡è¦å½±å“</li>
                            <li>å‡è®¾3ï¼šç ”ç©¶æˆæœå…·æœ‰å¹¿æ³›çš„åº”ç”¨ä»·å€¼</li>
                        </ul>
                        
                        <p><strong>Expected Outcomes:</strong></p>
                        <ul>
                            <li>å‘è¡¨é«˜è´¨é‡å­¦æœ¯è®ºæ–‡</li>
                            <li>å½¢æˆé‡è¦ç†è®ºè´¡çŒ®</li>
                            <li>åŸ¹å…»ä¼˜ç§€ç ”ç©¶äººæ‰</li>
                            <li>æ¨åŠ¨å­¦ç§‘å‘å±•</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ”¬ Methodology and Approach</h4>
                    <div class="section-content">
                        <p><strong>Research Design:</strong></p>
                        <p>æœ¬ç ”ç©¶é‡‡ç”¨æ··åˆç ”ç©¶æ–¹æ³•ï¼Œç»“åˆå®šé‡å’Œå®šæ€§åˆ†æï¼Œç¡®ä¿ç ”ç©¶ç»“æœçš„ç§‘å­¦æ€§å’Œå¯é æ€§ã€‚</p>
                        
                        <p><strong>Research Methods:</strong></p>
                        <ul>
                            <li><strong>æ–‡çŒ®ç ”ç©¶æ³•ï¼š</strong>ç³»ç»Ÿæ¢³ç†ç›¸å…³ç†è®ºå’Œç ”ç©¶æˆæœ</li>
                            <li><strong>å®è¯åˆ†ææ³•ï¼š</strong>æ”¶é›†å’Œåˆ†æç›¸å…³æ•°æ®</li>
                            <li><strong>æ¯”è¾ƒç ”ç©¶æ³•ï¼š</strong>è¿›è¡Œæ¨ªå‘å’Œçºµå‘æ¯”è¾ƒåˆ†æ</li>
                            <li><strong>æ¡ˆä¾‹ç ”ç©¶æ³•ï¼š</strong>æ·±å…¥åˆ†æå…¸å‹æ¡ˆä¾‹</li>
                        </ul>
                        
                        <p><strong>Data Collection:</strong></p>
                        <ul>
                            <li>ä¸€æ‰‹æ•°æ®ï¼šé€šè¿‡è°ƒç ”ã€å®éªŒç­‰æ–¹å¼æ”¶é›†</li>
                            <li>äºŒæ‰‹æ•°æ®ï¼šåˆ©ç”¨å…¬å¼€æ•°æ®åº“å’Œç»Ÿè®¡èµ„æ–™</li>
                            <li>è´¨é‡æ§åˆ¶ï¼šç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§</li>
                        </ul>
                        
                        <p><strong>Analysis Framework:</strong></p>
                        <ul>
                            <li>å»ºç«‹ç§‘å­¦çš„åˆ†ææ¡†æ¶</li>
                            <li>è¿ç”¨å…ˆè¿›çš„åˆ†æå·¥å…·å’Œè½¯ä»¶</li>
                            <li>é‡‡ç”¨å¤šç§åˆ†ææ–¹æ³•ç›¸äº’éªŒè¯</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ“… Timeline and Milestones</h4>
                    <div class="section-content">
                        <p><strong>Project Timeline (${projectDuration}):</strong></p>
                        
                        <div class="timeline-item">
                            <strong>ç¬¬1-3ä¸ªæœˆï¼šé¡¹ç›®å¯åŠ¨é˜¶æ®µ</strong>
                            <ul>
                                <li>å®Œæˆæ–‡çŒ®è°ƒç ”å’Œç†è®ºæ¢³ç†</li>
                                <li>åˆ¶å®šè¯¦ç»†ç ”ç©¶è®¡åˆ’</li>
                                <li>å»ºç«‹ç ”ç©¶å›¢é˜Ÿ</li>
                                <li>å®Œæˆå‰æœŸå‡†å¤‡å·¥ä½œ</li>
                            </ul>
                        </div>
                        
                        <div class="timeline-item">
                            <strong>ç¬¬4-8ä¸ªæœˆï¼šç ”ç©¶å®æ–½é˜¶æ®µ</strong>
                            <ul>
                                <li>å¼€å±•å®è¯ç ”ç©¶</li>
                                <li>æ”¶é›†å’Œæ•´ç†æ•°æ®</li>
                                <li>è¿›è¡Œåˆæ­¥åˆ†æ</li>
                                <li>å®Œæˆä¸­æœŸæŠ¥å‘Š</li>
                            </ul>
                        </div>
                        
                        <div class="timeline-item">
                            <strong>ç¬¬9-12ä¸ªæœˆï¼šæ€»ç»“å®Œå–„é˜¶æ®µ</strong>
                            <ul>
                                <li>å®Œæˆæ·±å…¥åˆ†æ</li>
                                <li>æ’°å†™ç ”ç©¶æŠ¥å‘Š</li>
                                <li>å‘è¡¨å­¦æœ¯è®ºæ–‡</li>
                                <li>é¡¹ç›®éªŒæ”¶å’Œæ€»ç»“</li>
                            </ul>
                        </div>
                        
                        <p><strong>Key Milestones:</strong></p>
                        <ul>
                            <li>âœ… é¡¹ç›®å¯åŠ¨ä¼šè®®</li>
                            <li>ğŸ“Š ä¸­æœŸè¿›å±•æŠ¥å‘Š</li>
                            <li>ğŸ“ ç ”ç©¶æˆæœå‘è¡¨</li>
                            <li>ğŸ¯ é¡¹ç›®ç»“é¢˜éªŒæ”¶</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ’° Budget Justification</h4>
                    <div class="section-content">
                        <p><strong>Total Budget: ${budgetText}</strong></p>
                        
                        <div class="budget-breakdown">
                            <div class="budget-item">
                                <strong>äººå‘˜è´¹ç”¨ (40%)</strong>
                                <ul>
                                    <li>ä¸»è¦ç ”ç©¶äººå‘˜å·¥èµ„</li>
                                    <li>ç ”ç©¶åŠ©ç†è´¹ç”¨</li>
                                    <li>ä¸“å®¶å’¨è¯¢è´¹</li>
                                </ul>
                            </div>
                            
                            <div class="budget-item">
                                <strong>è®¾å¤‡è´¹ç”¨ (25%)</strong>
                                <ul>
                                    <li>ç ”ç©¶è®¾å¤‡è´­ç½®</li>
                                    <li>è½¯ä»¶è®¸å¯è´¹ç”¨</li>
                                    <li>è®¾å¤‡ç»´æŠ¤è´¹ç”¨</li>
                                </ul>
                            </div>
                            
                            <div class="budget-item">
                                <strong>ææ–™è´¹ç”¨ (15%)</strong>
                                <ul>
                                    <li>å®éªŒææ–™</li>
                                    <li>åŠå…¬ç”¨å“</li>
                                    <li>æ•°æ®è´­ä¹°è´¹ç”¨</li>
                                </ul>
                            </div>
                            
                            <div class="budget-item">
                                <strong>å·®æ—…è´¹ç”¨ (10%)</strong>
                                <ul>
                                    <li>å­¦æœ¯ä¼šè®®å‚ä¼š</li>
                                    <li>å®åœ°è°ƒç ”è´¹ç”¨</li>
                                    <li>åˆä½œäº¤æµè´¹ç”¨</li>
                                </ul>
                            </div>
                            
                            <div class="budget-item">
                                <strong>å…¶ä»–è´¹ç”¨ (10%)</strong>
                                <ul>
                                    <li>è®ºæ–‡å‘è¡¨è´¹ç”¨</li>
                                    <li>çŸ¥è¯†äº§æƒè´¹ç”¨</li>
                                    <li>ç®¡ç†è´¹ç”¨</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ¯ Expected Outcomes and Impact</h4>
                    <div class="section-content">
                        <p><strong>Academic Outcomes:</strong></p>
                        <ul>
                            <li>å‘è¡¨é«˜æ°´å¹³å­¦æœ¯è®ºæ–‡ 3-5 ç¯‡</li>
                            <li>å‚åŠ å›½é™…å­¦æœ¯ä¼šè®®å¹¶åšæŠ¥å‘Š</li>
                            <li>å½¢æˆé‡è¦ç†è®ºè´¡çŒ®</li>
                            <li>åŸ¹å…»ç ”ç©¶ç”Ÿ 2-3 å</li>
                        </ul>
                        
                        <p><strong>Practical Impact:</strong></p>
                        <ul>
                            <li>ä¸ºæ”¿ç­–åˆ¶å®šæä¾›ç§‘å­¦ä¾æ®</li>
                            <li>æ¨åŠ¨è¡Œä¸šæŠ€æœ¯è¿›æ­¥</li>
                            <li>äº§ç”Ÿç»æµå’Œç¤¾ä¼šæ•ˆç›Š</li>
                            <li>ä¿ƒè¿›äº§å­¦ç ”åˆä½œ</li>
                        </ul>
                        
                        <p><strong>Long-term Vision:</strong></p>
                        <ul>
                            <li>å»ºç«‹é•¿æœŸç ”ç©¶åˆä½œå…³ç³»</li>
                            <li>å½¢æˆå¯æŒç»­çš„ç ”ç©¶æ–¹å‘</li>
                            <li>åŸ¹å…»ä¼˜ç§€ç ”ç©¶å›¢é˜Ÿ</li>
                            <li>æ¨åŠ¨å­¦ç§‘å‘å±•</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ“Š Evaluation and Dissemination Plan</h4>
                    <div class="section-content">
                        <p><strong>Evaluation Criteria:</strong></p>
                        <ul>
                            <li>ç ”ç©¶ç›®æ ‡å®Œæˆåº¦</li>
                            <li>å­¦æœ¯æˆæœè´¨é‡</li>
                            <li>ç¤¾ä¼šå½±å“åŠ›</li>
                            <li>äººæ‰åŸ¹å…»æ•ˆæœ</li>
                        </ul>
                        
                        <p><strong>Dissemination Strategy:</strong></p>
                        <ul>
                            <li><strong>å­¦æœ¯å‘è¡¨ï¼š</strong>åœ¨é¡¶çº§æœŸåˆŠå‘è¡¨ç ”ç©¶æˆæœ</li>
                            <li><strong>ä¼šè®®æŠ¥å‘Šï¼š</strong>å‚åŠ é‡è¦å­¦æœ¯ä¼šè®®</li>
                            <li><strong>åª’ä½“å®£ä¼ ï¼š</strong>é€šè¿‡åª’ä½“æ‰©å¤§å½±å“</li>
                            <li><strong>æ”¿ç­–å»ºè®®ï¼š</strong>å‘ç›¸å…³éƒ¨é—¨æä¾›æ”¿ç­–å»ºè®®</li>
                        </ul>
                        
                        <p><strong>Knowledge Transfer:</strong></p>
                        <ul>
                            <li>ä¸äº§ä¸šç•Œå»ºç«‹åˆä½œå…³ç³»</li>
                            <li>å¼€å±•æŠ€æœ¯è½¬ç§»æ´»åŠ¨</li>
                            <li>æä¾›å’¨è¯¢æœåŠ¡</li>
                            <li>åŸ¹è®­ç›¸å…³äººå‘˜</li>
                        </ul>
                    </div>
                </div>

                <div class="proposal-section">
                    <h4>ğŸ¯ Conclusion</h4>
                    <div class="section-content">
                        <p>æœ¬é¡¹ç›®"${data.projectTitle}"å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼å’Œå®è·µæ„ä¹‰ã€‚é€šè¿‡ç³»ç»Ÿçš„ç ”ç©¶è®¾è®¡å’Œç§‘å­¦çš„ç ”ç©¶æ–¹æ³•ï¼Œæˆ‘ä»¬æœ‰ä¿¡å¿ƒåœ¨${data.duration}å†…å®Œæˆé¢„å®šçš„ç ”ç©¶ç›®æ ‡ï¼Œäº§å‡ºé«˜è´¨é‡çš„ç ”ç©¶æˆæœã€‚</p>
                        
                        <p><strong>é¡¹ç›®ä¼˜åŠ¿ï¼š</strong></p>
                        <ul>
                            <li>ç ”ç©¶å›¢é˜Ÿå…·æœ‰ä¸°å¯Œçš„ç›¸å…³ç»éªŒ</li>
                            <li>ç ”ç©¶æ–¹æ³•ç§‘å­¦å¯è¡Œ</li>
                            <li>é¢„æœŸæˆæœå…·æœ‰é‡è¦ä»·å€¼</li>
                            <li>èµ„æºé…ç½®åˆç†æœ‰æ•ˆ</li>
                        </ul>
                        
                        <p><strong>æˆåŠŸä¿éšœï¼š</strong></p>
                        <ul>
                            <li>å®Œå–„çš„é¡¹ç›®ç®¡ç†æœºåˆ¶</li>
                            <li>å……è¶³çš„èµ„æºæ”¯æŒ</li>
                            <li>å¼ºæœ‰åŠ›çš„å›¢é˜Ÿåˆä½œ</li>
                            <li>æ˜ç¡®çš„è´¨é‡æ§åˆ¶æ ‡å‡†</li>
                        </ul>
                        
                        <p>æˆ‘ä»¬æ³è¯·${data.fundingAgency}ç»™äºˆæ”¯æŒï¼Œç›¸ä¿¡æœ¬é¡¹ç›®å°†ä¸º${data.researchArea}é¢†åŸŸçš„å‘å±•åšå‡ºé‡è¦è´¡çŒ®ï¼Œäº§ç”Ÿæ˜¾è‘—çš„å­¦æœ¯å’Œç¤¾ä¼šå½±å“ã€‚</p>
                    </div>
                </div>
            `;
        }

        function getBudgetText(range) {
            const budgets = {
                'small': '$1,000 - $10,000',
                'medium': '$10,000 - $50,000',
                'large': '$50,000 - $200,000',
                'xlarge': '$200,000+'
            };
            return budgets[range] || 'Not specified';
        }

        function downloadProposal() {
            const content = document.getElementById('outputContent').innerText;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'grant-proposal.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>