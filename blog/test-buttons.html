<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•æŒ‰é’®åŠŸèƒ½</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        button { margin: 5px; padding: 10px 15px; }
        .article-card { border: 1px solid #ccc; padding: 15px; margin: 10px 0; position: relative; }
        .article-actions { position: absolute; top: 10px; right: 10px; }
        .edit-btn, .delete-btn { margin-left: 5px; padding: 5px 8px; border: none; border-radius: 3px; cursor: pointer; }
        .edit-btn { background: #28a745; color: white; }
        .delete-btn { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <h1>æµ‹è¯•åˆ é™¤å’Œç¼–è¾‘æŒ‰é’®åŠŸèƒ½</h1>
    
    <div class="test-section">
        <h2>1. æ¸…ç†å¹¶æ·»åŠ æµ‹è¯•æ•°æ®</h2>
        <button onclick="clearAndAddTest()">æ¸…ç†å¹¶æ·»åŠ æµ‹è¯•æ–‡ç« </button>
        <div id="step1-result"></div>
    </div>
    
    <div class="test-section">
        <h2>2. æŸ¥çœ‹localStorageæ•°æ®</h2>
        <button onclick="showStorageData()">æ˜¾ç¤ºlocalStorageæ•°æ®</button>
        <div id="step2-result"></div>
    </div>
    
    <div class="test-section">
        <h2>3. æ¨¡æ‹Ÿæ–‡ç« å¡ç‰‡</h2>
        <div id="article-container"></div>
        <button onclick="createTestCard()">åˆ›å»ºæµ‹è¯•æ–‡ç« å¡ç‰‡</button>
    </div>
    
    <div class="test-section">
        <h2>4. æµ‹è¯•æŒ‰é’®åŠŸèƒ½</h2>
        <button onclick="window.location.href='index.html'">å‰å¾€åšå®¢é¡µé¢</button>
    </div>
    
    <script>
        function clearAndAddTest() {
            // æ¸…ç†æ—§æ•°æ®
            localStorage.removeItem('newArticles');
            localStorage.removeItem('publishedArticles');
            
            // æ·»åŠ æµ‹è¯•æ–‡ç« 
            const testArticle = {
                id: 'new_test-article-with-management-buttons',
                title: 'æµ‹è¯•æ–‡ç«  - å¸¦ç®¡ç†æŒ‰é’®',
                excerpt: 'è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œç”¨äºéªŒè¯åˆ é™¤å’Œç¼–è¾‘æŒ‰é’®çš„æ˜¾ç¤ºå’ŒåŠŸèƒ½ã€‚',
                category: 'writing',
                categoryName: 'Writing Techniques',
                date: new Date().toISOString().split('T')[0],
                readTime: '3 min read',
                icon: 'ğŸ§ª',
                url: 'test-article.html',
                content: 'è¿™æ˜¯æµ‹è¯•æ–‡ç« çš„å®Œæ•´å†…å®¹ã€‚åŒ…å«è¶³å¤Ÿçš„æ–‡å­—æ¥æµ‹è¯•ç¼–è¾‘åŠŸèƒ½ã€‚ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°åˆ é™¤å’Œç¼–è¾‘æŒ‰é’®ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨è¿™äº›åŠŸèƒ½ã€‚',
                tags: ['æµ‹è¯•', 'æŒ‰é’®', 'ç®¡ç†'],
                author: 'AI Grant Writer'
            };
            
            localStorage.setItem('newArticles', JSON.stringify([testArticle]));
            document.getElementById('step1-result').innerHTML = '<p style="color: green;">âœ… æµ‹è¯•æ•°æ®å·²æ·»åŠ </p>';
        }
        
        function showStorageData() {
            const newArticles = localStorage.getItem('newArticles');
            const publishedArticles = localStorage.getItem('publishedArticles');
            
            let html = '<h3>localStorage æ•°æ®:</h3>';
            html += '<h4>newArticles:</h4><pre>' + (newArticles || 'ç©º') + '</pre>';
            html += '<h4>publishedArticles:</h4><pre>' + (publishedArticles || 'ç©º') + '</pre>';
            
            document.getElementById('step2-result').innerHTML = html;
        }
        
        function createTestCard() {
            const articles = JSON.parse(localStorage.getItem('newArticles') || '[]');
            const container = document.getElementById('article-container');
            
            if (articles.length === 0) {
                container.innerHTML = '<p style="color: red;">æ²¡æœ‰æ‰¾åˆ°æµ‹è¯•æ–‡ç« ï¼Œè¯·å…ˆæ‰§è¡Œæ­¥éª¤1</p>';
                return;
            }
            
            const article = articles[0];
            const cardHtml = `
                <div class="article-card" style="border: 1px solid #ddd; border-radius: 12px; overflow: hidden; max-width: 400px;">
                    <div class="article-header-actions" style="display: flex; justify-content: flex-end; gap: 8px; padding: 12px 16px 8px 16px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-bottom: 1px solid #dee2e6;">
                        <button class="edit-btn" onclick="editArticle('${article.id}')" style="display: flex; align-items: center; gap: 6px; padding: 6px 12px; border: none; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                            âœï¸ ç¼–è¾‘
                        </button>
                        <button class="delete-btn" onclick="deleteArticle('${article.id}')" style="display: flex; align-items: center; gap: 6px; padding: 6px 12px; border: none; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%); color: white;">
                            ğŸ—‘ï¸ åˆ é™¤
                        </button>
                    </div>
                    <div style="padding: 15px;">
                        <h3>${article.title}</h3>
                        <p>${article.excerpt}</p>
                        <small>ID: ${article.id}</small>
                    </div>
                </div>
            `;
            
            container.innerHTML = cardHtml;
        }
        
        function deleteArticle(articleId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
                const articles = JSON.parse(localStorage.getItem('newArticles') || '[]');
                const updatedArticles = articles.filter(article => article.id !== articleId);
                localStorage.setItem('newArticles', JSON.stringify(updatedArticles));
                alert('æ–‡ç« å·²åˆ é™¤ï¼');
                createTestCard(); // é‡æ–°åˆ›å»ºå¡ç‰‡
            }
        }
        
        function editArticle(articleId) {
            const articles = JSON.parse(localStorage.getItem('newArticles') || '[]');
            const article = articles.find(a => a.id === articleId);
            if (article) {
                sessionStorage.setItem('editingArticle', JSON.stringify(article));
                alert('æ–‡ç« æ•°æ®å·²ä¿å­˜åˆ°sessionStorageï¼Œå³å°†è·³è½¬åˆ°ç¼–è¾‘é¡µé¢');
                window.location.href = 'publish-article.html?edit=true';
            }
        }
    </script>
</body>
</html>