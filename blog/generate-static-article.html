<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæˆé™æ€æ–‡ç« </title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .article-preview { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ç”Ÿæˆé™æ€æ–‡ç« å·¥å…·</h1>
        
        <div class="status info">
            <strong>ç›®æ ‡æ–‡ç« ID:</strong> mhhtjrhc80kursa47dv<br>
            <strong>é¢„æœŸé™æ€é“¾æ¥:</strong> ai-tools-for-dissertation-literature-review-outline-streamlining-your-research.html
        </div>

        <div>
            <button onclick="checkArticleData()">1. æ£€æŸ¥æ–‡ç« æ•°æ®</button>
            <button onclick="generateStaticFile()">2. ç”Ÿæˆé™æ€æ–‡ä»¶</button>
            <button onclick="downloadStaticFile()">3. ä¸‹è½½é™æ€æ–‡ä»¶</button>
        </div>

        <div id="output"></div>
        <div id="articlePreview"></div>
    </div>

    <script>
        const targetArticleId = 'mhhtjrhc80kursa47dv';
        let foundArticle = null;

        function log(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            output.appendChild(div);
        }

        function checkArticleData() {
            log('ğŸ” æ£€æŸ¥æ–‡ç« æ•°æ®...', 'info');
            
            // æ£€æŸ¥ newArticles
            const newArticles = JSON.parse(localStorage.getItem('newArticles') || '[]');
            log(`æ–°æ–‡ç« æ•°é‡: ${newArticles.length}`, 'info');
            
            // æ£€æŸ¥ publishedArticles  
            const publishedArticles = JSON.parse(localStorage.getItem('publishedArticles') || '[]');
            log(`å·²å‘å¸ƒæ–‡ç« æ•°é‡: ${publishedArticles.length}`, 'info');
            
            // åˆå¹¶æ‰€æœ‰æ–‡ç« 
            const allArticles = [...newArticles, ...publishedArticles];
            
            // æŸ¥æ‰¾ç›®æ ‡æ–‡ç« 
            foundArticle = allArticles.find(article => article.id === targetArticleId);
            
            if (foundArticle) {
                log(`âœ… æ‰¾åˆ°æ–‡ç« : ${foundArticle.title}`, 'success');
                
                // æ˜¾ç¤ºæ–‡ç« é¢„è§ˆ
                const preview = document.getElementById('articlePreview');
                preview.innerHTML = `
                    <div class="article-preview">
                        <h3>ğŸ“„ æ–‡ç« é¢„è§ˆ</h3>
                        <p><strong>æ ‡é¢˜:</strong> ${foundArticle.title}</p>
                        <p><strong>åˆ†ç±»:</strong> ${foundArticle.categoryName || foundArticle.category}</p>
                        <p><strong>æ—¥æœŸ:</strong> ${foundArticle.date}</p>
                        <p><strong>é˜…è¯»æ—¶é—´:</strong> ${foundArticle.readTime}</p>
                        <p><strong>å†…å®¹é•¿åº¦:</strong> ${foundArticle.content ? foundArticle.content.length : 0} å­—ç¬¦</p>
                    </div>
                `;
            } else {
                log(`âŒ æœªæ‰¾åˆ°IDä¸º ${targetArticleId} çš„æ–‡ç« `, 'error');
                
                // æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æ–‡ç« ID
                if (allArticles.length > 0) {
                    const articleIds = allArticles.map(a => `${a.id} - ${a.title}`).join('\n');
                    log(`å¯ç”¨æ–‡ç« åˆ—è¡¨:\n${articleIds}`, 'info');
                }
            }
        }

        function generateStaticFile() {
            if (!foundArticle) {
                log('âŒ è¯·å…ˆæ£€æŸ¥æ–‡ç« æ•°æ®', 'error');
                return;
            }

            log('ğŸ”¨ ç”Ÿæˆé™æ€HTMLæ–‡ä»¶...', 'info');

            // ç”Ÿæˆæ–‡ä»¶å
            const slug = foundArticle.title
                .toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .trim();
            
            const fileName = `${slug}.html`;
            
            // ç”ŸæˆHTMLå†…å®¹
            const htmlContent = generateArticleHTML(foundArticle);
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            // å­˜å‚¨åˆ°å…¨å±€å˜é‡ä¾›ä¸‹è½½ä½¿ç”¨
            window.generatedFile = { url, fileName, content: htmlContent };
            
            log(`âœ… é™æ€æ–‡ä»¶å·²ç”Ÿæˆ: ${fileName}`, 'success');
            log(`æ–‡ä»¶å¤§å°: ${(htmlContent.length / 1024).toFixed(2)} KB`, 'info');
        }

        function downloadStaticFile() {
            if (!window.generatedFile) {
                log('âŒ è¯·å…ˆç”Ÿæˆé™æ€æ–‡ä»¶', 'error');
                return;
            }

            const { url, fileName } = window.generatedFile;
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            log(`ğŸ“¥ æ–‡ä»¶å·²ä¸‹è½½: ${fileName}`, 'success');
            log('ğŸ’¡ ä¸‹è½½å®Œæˆåï¼Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬ä¼šæ£€æµ‹åˆ°æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°ç½‘ç«™', 'info');
        }

        function generateArticleHTML(article) {
            const slug = article.title.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-').trim();
            
            return '<!DOCTYPE html>\n' +
'<html lang="zh-CN">\n' +
'<head>\n' +
'    <meta charset="UTF-8">\n' +
'    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n' +
'    <title>' + article.title + ' - AI Grant Writer</title>\n' +
'    <meta name="description" content="' + article.title + ' - ä¸“ä¸šçš„å­¦æœ¯å†™ä½œæŒ‡å—å’ŒAIå·¥å…·æ¨è">\n' +
'    <meta name="keywords" content="AIå·¥å…·,å­¦æœ¯å†™ä½œ,æ–‡çŒ®ç»¼è¿°,è®ºæ–‡å†™ä½œ,ç ”ç©¶æ–¹æ³•">\n' +
'    <meta name="author" content="AI Grant Writer">\n' +
'    <meta name="robots" content="index, follow">\n' +
'    <link rel="canonical" href="https://www.aigrantwriter.xyz/blog/' + slug + '.html">\n' +
'    \n' +
'    <!-- Open Graph -->\n' +
'    <meta property="og:title" content="' + article.title + '">\n' +
'    <meta property="og:description" content="' + article.title + ' - ä¸“ä¸šçš„å­¦æœ¯å†™ä½œæŒ‡å—">\n' +
'    <meta property="og:type" content="article">\n' +
'    <meta property="og:url" content="https://www.aigrantwriter.xyz/blog/' + slug + '.html">\n' +
'    <meta property="og:site_name" content="AI Grant Writer">\n' +
'    \n' +
'    <!-- JSON-LD ç»“æ„åŒ–æ•°æ® -->\n' +
'    <script type="application/ld+json">\n' +
'    {\n' +
'        "@context": "https://schema.org",\n' +
'        "@type": "Article",\n' +
'        "headline": "' + article.title + '",\n' +
'        "author": {\n' +
'            "@type": "Organization",\n' +
'            "name": "AI Grant Writer"\n' +
'        },\n' +
'        "publisher": {\n' +
'            "@type": "Organization",\n' +
'            "name": "AI Grant Writer",\n' +
'            "url": "https://www.aigrantwriter.xyz"\n' +
'        },\n' +
'        "datePublished": "' + article.date + '",\n' +
'        "dateModified": "' + article.date + '",\n' +
'        "description": "' + article.title + ' - ä¸“ä¸šçš„å­¦æœ¯å†™ä½œæŒ‡å—",\n' +
'        "mainEntityOfPage": {\n' +
'            "@type": "WebPage",\n' +
'            "@id": "https://www.aigrantwriter.xyz/blog/' + slug + '.html"\n' +
'        }\n' +
'    }\n' +
'    </script>\n' +
'    \n' +
'    <link rel="stylesheet" href="../styles.css">\n' +
'    <link rel="stylesheet" href="article-styles.css">\n' +
'    <link rel="icon" href="../favicon.svg" type="image/svg+xml">\n' +
'</head>\n' +
'<body>\n' +
'    <!-- Navigation -->\n' +
'    <nav class="navbar">\n' +
'        <div class="nav-container">\n' +
'            <div class="nav-logo">\n' +
'                <a href="../index.html">\n' +
'                    <img src="../logo.svg" alt="AI Grant Writer" class="logo">\n' +
'                    AI Grant Writer\n' +
'                </a>\n' +
'            </div>\n' +
'            <div class="nav-menu">\n' +
'                <a href="../index.html" class="nav-link">é¦–é¡µ</a>\n' +
'                <a href="index.html" class="nav-link">åšå®¢</a>\n' +
'                <a href="../ai-tools.html" class="nav-link">AIå·¥å…·</a>\n' +
'                <a href="../academic-templates.html" class="nav-link">å­¦æœ¯æ¨¡æ¿</a>\n' +
'            </div>\n' +
'        </div>\n' +
'    </nav>\n' +
'\n' +
'    <!-- Article Content -->\n' +
'    <main class="article-main">\n' +
'        <div class="container">\n' +
'            <article class="article">\n' +
'                <header class="article-header">\n' +
'                    <div class="article-meta">\n' +
'                        <span class="article-category">' + (article.categoryName || article.category) + '</span>\n' +
'                        <span class="article-date">' + article.date + '</span>\n' +
'                        <span class="article-read-time">' + article.readTime + '</span>\n' +
'                    </div>\n' +
'                    <h1 class="article-title">' + article.title + '</h1>\n' +
'                </header>\n' +
'                \n' +
'                <div class="article-content">\n' +
'                    ' + (article.content || '<p>æ–‡ç« å†…å®¹æ­£åœ¨åŠ è½½ä¸­...</p>') + '\n' +
'                </div>\n' +
'                \n' +
'                <footer class="article-footer">\n' +
'                    <div class="article-tags">\n' +
'                        <span class="tag">AIå·¥å…·</span>\n' +
'                        <span class="tag">å­¦æœ¯å†™ä½œ</span>\n' +
'                        <span class="tag">æ–‡çŒ®ç»¼è¿°</span>\n' +
'                    </div>\n' +
'                    <div class="article-share">\n' +
'                        <a href="../index.html" class="btn btn-primary">è¿”å›é¦–é¡µ</a>\n' +
'                        <a href="index.html" class="btn btn-secondary">æ›´å¤šæ–‡ç« </a>\n' +
'                    </div>\n' +
'                </footer>\n' +
'            </article>\n' +
'        </div>\n' +
'    </main>\n' +
'\n' +
'    <!-- Footer -->\n' +
'    <footer class="footer">\n' +
'        <div class="container">\n' +
'            <p>&copy; 2024 AI Grant Writer. All rights reserved.</p>\n' +
'        </div>\n' +
'    </footer>\n' +
'</body>\n' +
'</html>';
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkArticleData, 500);
        });
    </script>
</body>
</html>